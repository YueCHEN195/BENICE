# 1 http协议

## 1 浏览器输入url之后，http请求返回的完整过程



## 2 网络协议经典的五层模型

应用层（HTTP，FTP），传输层（TCP，UDP），网络层，数据链路层，物理层

物理层主要用来定义物理设备如何传输数据：光缆，网卡，网线。。。

数据链路层在通信的实体间建立数据链路链接

网络层为数据在节点之间传输创建逻辑链路

传输层：TCP/IP协议，UDP协议

## 3 建立TCP连接的三次握手

发生在第三层，传输层

建立TCP连接需要经过三次握手：

SYN=1表示SYN占据了标志位

1. 客户端发送SYN=1,seq=x给服务端，这时候客户端的状态是 SYNSENT
SYN是一个代表建立连接数据包，建立连接，会在其序列号的字段进行序列号的初始值设定：为1 SYN是TCP报文的一个字段 SYN=1表示这是一个建立连接的请求
seq是由本地随机产生的一个序列号，作用是来确保数据流的传输顺序的，tcp会为每次传送的字节流按照顺序编号
2. 服务端返回SYN=1,ACK=X+1,seq=y,返回了之后服务端的状态是SYN-REVD
ACK是确认表示，ACK=1表示确认号有效，ack是确认号等于x+1
3. 客户端发送ACK=1，ack=y+1，seq=x+1

## 4 URI RUL URN

URI （统一资源标识符）包括了 URL和URN
用来标识互联网
URL就是一个表示资源位置的字符串,通过URL我们可以准确的访问到互联网上的这个资源。
URI是用来标记了一个网络资源，至于是不是能通过URI访问到，不一定。
URN是资源的一个名字，我们并不能通过资源的名字来访问资源。

## 5 http请求报文结构

请求报文

1.首行：第一部分：请求的方法，第二部分：请求的地址（相对地址），第三部分：协议的版本。
2.请求头：
空行
3.请求体

响应报文：
1.首行：第一部分：协议版本，第二部分：状态码，状态码代表的含义
2.header：
空行
3.请求体，返回的数据

## 6 status code 含义

## 7 跨域问题

禁止跨域是浏览器的行为，服务端的解决办法可以在response的响应头里面设置`Access-Control-Allow-Origin: '*'` `Access-Control-Allow-Headers`:`Access-Control-Allow-Methods: Post,Put,Delete` 这三个方法都可以设置不同条件下的请求跨域。

是浏览器的行为，也就是说这个请求实际上已经被发送了，而且服务器也给了返回信息，浏览器也接收到了，只是被浏览器忽略了。

## 8 http协议中的缓存

在请求头中设置 `Cache-Control`:`max-age` 可以对请求的静态资源进行缓存
Last-modified
Etag

## 9 cookie 和 session

cookie: 通过Set-Cookie设置，下次请求就会自动带上。属性有 max-age Secure HttpOnly 设置了之后就不能通过document.cookie来访问（不能通过JS访问）

## 10 长连接，短连接

通过在请求头和响应头里面设置 Connection: keep-Alive 里面保持长连接 必须响应和请求都设置
http2 带来的好处：信道复用

## 11 301和302区别

301 永久重定向，301页面跳转的原理是，在第一次页面跳转之后，下次浏览器再访问这个地址，浏览器直接不去请求原地址而去请求新地址。

302 临时重定向，浏览器每次都会请求原地址，然后再去请求新地址。

## 12 防止xss攻击

在响应头里面设置CSP

`Content-Security-Policy`:`default-src http: https:` 可以禁止引入外部的JavaScript

当发生促发了CSP后可以设置一个report路径

## 13防止CSRF攻击

服务端的话可以验证请求header里面的refer字段来验证这个请求从哪儿发过来的。